

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Anthropogenic heat - GQF &mdash; SUEWS v2018c documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> SUEWS
          

          
          </a>

          
            
            
              <div class="version">
                v2018c
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../parameterisations-and-sub-models.html">2. Parameterisations and sub-models within SUEWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../prepare-to-run-the-model.html">3. Preparing to run the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../input_files/input_files.html">4. Input files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../output_files/output_files.html">5. Output files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../troubleshooting.html">6. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../recent-publications.html">7. Recent publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../suews_related_softwares.html">8. SUEWS-related Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials.html">9. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../development/development.html">10. Development, Suggestions and Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../benchmark/benchmark_report.html">Benchmark Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../version-history/version-history.html">11. Version History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../acknowledgement.html">12. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../notation.html">13. Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../references.html">14. References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">SUEWS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
      <li>Anthropogenic heat - GQF</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/sub-tutorials/tutorials/docs/source/Tutorials/GQF.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please report issues with the manual on the <a class="reference external" href="https://github.com/Urban-Meteorology-Reading/SUEWS-Docs/issues/new?template=issue-report.md">GitHub page</a>.</p>
</div>
<div class="section" id="anthropogenic-heat-gqf">
<span id="gqf"></span><h1>Anthropogenic heat - GQF<a class="headerlink" href="#anthropogenic-heat-gqf" title="Permalink to this headline">¶</a></h1>
<p>This tutorial demonstrates how the GQF software is used to simulate
anthropogenic heat fluxes (Q<sub>F</sub>) for London, UK, in the year 2015, using a
mixture of administrative and meteorological data.</p>
<div class="section" id="initial-practical-steps">
<h2>Initial Practical steps<a class="headerlink" href="#initial-practical-steps" title="Permalink to this headline">¶</a></h2>
<p>UMEP is a python plugin used in conjunction with
<a class="reference external" href="http://www.qgis.org">QGIS</a>. To install the software and the UMEP
plugin see the <a class="reference external" href="http://umep-docs.readthedocs.io/en/latest/Getting_Started.html">getting
started</a>
section in the UMEP manual.</p>
<p>As UMEP is under constant development, some documentation may be missing
and/or there may be instability. Please report any issues or suggestions
to our <a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/">repository</a>.</p>
<div class="section" id="data-for-this-exercise">
<h3>Data for this exercise<a class="headerlink" href="#data-for-this-exercise" title="Permalink to this headline">¶</a></h3>
<p>In order to proceed, you will need the zip file named
<a class="reference external" href="https://urban-meteorology-reading.github.io/other%20files/GQF_Inputs_1.zip">GQF_Inputs_1.zip</a>
from the UMEP tutorials data reopository.</p>
<p>You may also wish to consult the <a class="reference external" href="http://umep-docs.readthedocs.io/en/latest/OtherManuals/GQF_Manual.html">GQF user guide</a></p>
<p>The GQF_Inputs_1.zip file contains several datasets to cover the
comprehensive requirements of GQF:</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="45%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Filename</th>
<th class="head">Description</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>500m_Residential_from_100m.shp</td>
<td>Residential population</td>
<td>Attribute: “Pop”, Feature ID: “ID”</td>
</tr>
<tr class="row-odd"><td>500m_Workday_from_100m.shp</td>
<td>Workday population</td>
<td>Attribute: “Pop”</td>
</tr>
<tr class="row-even"><td>MSOA_elec_gas_2014.shp</td>
<td>Industrial gas use (annual)</td>
<td>Attribute:“GasInd”</td>
</tr>
<tr class="row-odd"><td>LA_energy_2014.shp</td>
<td>Industrial electricity use (annual)</td>
<td>Attribute:“ElInd_kWh”</td>
</tr>
<tr class="row-even"><td>LSOA_elec_gas_2014.shp</td>
<td>Domestic gas and electricity use (annual)</td>
<td>Attributes:“GasDom”, “TelDom”</td>
</tr>
<tr class="row-odd"><td>2015GasElecDD.csv</td>
<td>Day-to-day variations in gas and electricity use</td>
<td>Year 2015</td>
</tr>
<tr class="row-even"><td>BuildingLoadings_DomUnre.csv</td>
<td>Weekend and weekday diurnal profiles of domestic energy use</td>
<td>6 seasonal variants</td>
</tr>
<tr class="row-odd"><td>BuildingLoadings_Industrial.csv</td>
<td>Weekend and weekday diurnal profiles of industrial energy use</td>
<td>6 seasonal variants</td>
</tr>
<tr class="row-even"><td>BuildingLoadings_EC7.csv</td>
<td>Weekend and weekday diurnal profiles of domestic economy 7 energy use</td>
<td>File required for model execution but data not actually used</td>
</tr>
<tr class="row-odd"><td>LAEI2013_AADTVKm_2013_link.shp</td>
<td>Road link map with vehicle flows broken down by fuel and vehicle type</td>
<td>Feature ID: “OBJECTID”</td>
</tr>
<tr class="row-even"><td>fuelConsumption.csv</td>
<td>Fuel efficiency (g/km) of different vehicle classes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Transport.csv</td>
<td>Weekend and weekday diurnal profiles for each vehicle class</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Metabolism.csv</td>
<td>Weekend and weekday diurnal profiles of metabolic activity</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Parameters.nml</td>
<td>Configuration file containing model run parameters</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>DataSources.nml</td>
<td>Configuration file specifying different input data sources for model</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="gqf-tutorial-1-comprehensive-qf-modelling-for-greater-london">
<h2>GQF Tutorial 1: Comprehensive Q<sub>F</sub> modelling for Greater London<a class="headerlink" href="#gqf-tutorial-1-comprehensive-qf-modelling-for-greater-london" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preparing-data">
<h3>Preparing data<a class="headerlink" href="#preparing-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="manage-input-data-files">
<h4>Manage input data files<a class="headerlink" href="#manage-input-data-files" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Extract the contents of GQF_Inputs_1.zip into a folder on your</dt>
<dd>local machine and note the path to each file (e.g.
<em>C:\GQFData\BuildingLoadings_Industrial.csv</em>).</dd>
</dl>
</div>
<div class="section" id="gather-information-about-shapefile-inputs">
<h4>Gather information about shapefile inputs<a class="headerlink" href="#gather-information-about-shapefile-inputs" title="Permalink to this headline">¶</a></h4>
<p>GQF uses multiple shapefiles (ending .shp) to build up a picture of
energy use, population and road transport across the city. Five pieces
of information are needed for each of these:</p>
<ol class="arabic simple">
<li>Filename: The full path to the .shp file (e.g.
<em>c:\path\to\file.shp</em>)</li>
<li>Start date: The modelled date from which this data should be used</li>
<li>EPSG code: A numeric code that determines which co-ordinate reference
system (CRS) to use for the shapefile</li>
<li>Attribute to use. A shapefile attaches one or more attributes (e.g.
population or energy consumption) to each spatial unit. The name of
the relevant attribute must be specified here.</li>
<li>Feature IDs: The name of an attribute that contains a unique
identifier for each spatial unit</li>
</ol>
<p><a class="reference external" href="https://umep-docs.readthedocs.io/en/latest/OtherManuals/LQF_Manual.html#appendix-b-gathering-information-about-shapefiles-for-qf-modelling">Click here</a>
for a guide explaining how to identify the feature ID, attribute to use
and EPSG code of a shapefile using QGIS.</p>
<p>A shapefile also defines the so-called output areas, which are the
spatial units (sometimes pixels) of model output (one Q<sub>F</sub> estimate per
area). These are needed because the spatial units of the various input
files may not all match up. The output areas can either be one of the
input files, or a totally different set of areas. In this tutorial, one
of the population datasets is used to keep things simple.</p>
</div>
</div>
<div class="section" id="set-up-the-datasources-nml-file">
<h3>Set up the DataSources.nml file<a class="headerlink" href="#set-up-the-datasources-nml-file" title="Permalink to this headline">¶</a></h3>
<p>The data sources file needs to be updated so that it can find the
various data files, and understands what to do with them. A full
description of the Data sources file contents is available
<a class="reference external" href="https://umep-docs.readthedocs.io/en/latest/OtherManuals/GQF_Manual.html#data-sources-file">here</a>, but this section shows how to
build up the entries.</p>
<p>There are several sections in the data sources file. Each is bounded by
<strong>&amp;section_name</strong> and ends with <strong>“/”</strong> and deals with a different part
of the input data.</p>
<ol class="arabic simple">
<li>Open DataSources.nml using a text editor (we recommend Notepad++).</li>
<li>The following steps show how to update the entries according to the
information gathered above.</li>
</ol>
<div class="section" id="add-shapefile-information">
<h4>Add shapefile information<a class="headerlink" href="#add-shapefile-information" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>The “<strong>shapefile</strong>” entry is the path to the file</li>
<li>The <strong>epsgCode</strong> and <strong>featureIds</strong> entries are found by inspecting
each file using QGIS. Note that each file has different values for
these</li>
<li>The attribToUse entry for each file is covered in the table above</li>
<li>An arbitrary start date of 2011-01-01 (1st january) can be used for
the data shown.</li>
</ol>
<p>For brevity, just the first two sections of the DataSources.nml file are
shown here: Using the workday population spatial units as model output
areas. This section does not need to use an attribute or know about a
start date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">outputAreas</span>
     <span class="n">shapefile</span> <span class="o">=</span> <span class="s1">&#39;C:\path</span><span class="se">\t</span><span class="s1">o\data</span><span class="se">\500</span><span class="s1">m_Workday_from_100m.shp&#39;</span>
     <span class="n">epsgCode</span> <span class="o">=</span> <span class="mi">32631</span>
     <span class="n">featureIds</span> <span class="o">=</span> <span class="s1">&#39;ID&#39;</span>
<span class="o">/</span>
</pre></div>
</div>
<p>Specifying the residential population data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! ### Population data
&amp;residentialPop
   shapefiles = &#39;C:\path\to\data\500m_Residential_from_100m.shp&#39;
   startDates = &#39;2011-01-01&#39;
   attribToUse = &#39;Pop&#39;
   featureIds = &#39;ID&#39;
/
</pre></div>
</div>
<p>The same pattern is used for the other spatial input datasets:</p>
<ul class="simple">
<li><strong>workplacePop</strong>: Workplace/workday population dataset</li>
<li><strong>annualIndGas</strong>: Industrial gas use</li>
<li><strong>annualIndElec</strong>: Industrial electricity use</li>
<li><strong>annualDomGas</strong>: Domestic gas use</li>
<li><strong>annualDomElec</strong>: Domestic electricity use (same file as domestic
gas, but different attribute)</li>
</ul>
<p>For the <strong>annualEco7</strong> section, we shall assume zero consumption. This
doesn’t need a shapefile - a single number indicating the whole-city
consumption should be used instead, along with dummy EPSG code,
attribToUse and featureIds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;annualEco7
   ! Spatial variations of economy 7 electricity use
   shapefiles = 0.0
   startDates = &#39;2014-01-01&#39;
   epsgCodes = 1
   attribToUse = &#39;IndGas&#39; !A dummy name
   featureIds = &#39;&#39;
/
</pre></div>
</div>
</div>
<div class="section" id="add-temporal-data-files">
<h4>Add temporal data files<a class="headerlink" href="#add-temporal-data-files" title="Permalink to this headline">¶</a></h4>
<div class="section" id="day-to-day-energy-demand-changes">
<h5>Day-to-day energy demand changes<a class="headerlink" href="#day-to-day-energy-demand-changes" title="Permalink to this headline">¶</a></h5>
<p>GQF uses annual total energy consumption shapefiles, and needs to know
how to vary energy consumption on different dates (e.g. winter is likely
to have more fuel use than summer). This is captured using real data
from the energy grid. The <strong>2015GasElecDD.csv</strong> file contains each day’s
total gas and electricity consumption. GQF then scales the annual
consumption based on this each day.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">dailyEnergyUse</span>
   <span class="n">Daily</span> <span class="n">variations</span> <span class="ow">in</span> <span class="n">total</span> <span class="n">power</span> <span class="n">use</span>
   <span class="n">profileFiles</span> <span class="o">=</span> <span class="s1">&#39;C:\Path\To</span><span class="se">\201</span><span class="s1">5GasElecDD.csv&#39;</span>
<span class="o">/</span>
</pre></div>
</div>
<p>Only the year(s) represented by the data should be modelled, but if only
past years are available GQF will recycle it for later years, offering
the closest sensible match to time of week and time of year.</p>
</div>
<div class="section" id="metabolism-file">
<h5>Metabolism file<a class="headerlink" href="#metabolism-file" title="Permalink to this headline">¶</a></h5>
<p>The metabolism file controls:</p>
<ul class="simple">
<li>How much energy each the average person emits at each time of day</li>
<li>The fraction of an area’s workday population actually at work (and by
extension the fraction of the residential population at home)</li>
</ul>
<p>The <strong>metabolism.csv</strong> file contains a weekday, saturday and sunday
variant of this information, and copies for each daylight savings regime
in the UK to account for changes in the summer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! Temporal metabolism data
&amp;diurnalMetabolism
    profileFiles = &#39;N:\QF_London\GreaterQF_input\London\Profiles\\Metabolism.csv&#39;
/
</pre></div>
</div>
</div>
<div class="section" id="building-diurnal-profiles">
<h5>Building diurnal profiles<a class="headerlink" href="#building-diurnal-profiles" title="Permalink to this headline">¶</a></h5>
<p>As shown above, the different kinds of building energy consumption are
separated in GQF. Their diurnal profiles are also different so that the
different behaviours of households and businesses are represented
accurately. This means that each of the building energy inputs also
requires a diurnal profile data file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;diurnalDomElec
   ! Diurnal variations in total domestic electricity use (metadata provided in file; files can contain multiple seasons)
   profileFiles =
&#39;C:\Path\To\BuildingLoadings_DomUnre.csv&#39;
/
&amp;diurnalDomGas
   ! Diurnal variations in total domestic gas use (metadata provided in file; files can contain multiple seasons)
   profileFiles = &#39;C:\Path\To\BuildingLoadings_DomUnre.csv&#39;
/
&amp;diurnalIndElec
   ! Diurnal variations in total industrial electricity use (metadata provided in file; files can contain multiple seasons)
   profileFiles = &#39;C:\Path\To\BuildingLoadings_Industrial.csv&#39;
/
&amp;diurnalIndGas
   ! Diurnal variations in total industrial gas use (metadata provided in file; files can contain multiple seasons)
   profileFiles = &#39;C:\Path\To\BuildingLoadings_Industrial.csv&#39;
/
&amp;diurnalEco7
   ! Diurnal variations in total economy 7 electricity use (metadata provided in file; files can contain multiple seasons)
   profileFiles = &#39;C:\Path\To\BuildingLoadings_EC7.csv&#39;
/
</pre></div>
</div>
</div>
</div>
<div class="section" id="add-information-about-transport">
<h4>Add information about transport<a class="headerlink" href="#add-information-about-transport" title="Permalink to this headline">¶</a></h4>
<p>The transport input data files are very detailed and therefore needs a
lot of descriptive information in the &amp;transportData section of
<strong>DataSources.nml</strong></p>
<div class="section" id="shapefile">
<h5>Shapefile<a class="headerlink" href="#shapefile" title="Permalink to this headline">¶</a></h5>
<p>To save time, the DataSources file is mostly completed in advance with
entries that reflect the transport shapefile, but some of the key
entries still need completing as part of the tutorial:</p>
<ul class="simple">
<li>The location, EPSG code, feature ID and start date of the road
transport shapefile</li>
<li>Information about what is available in the shapefile</li>
</ul>
<p>It should be possible to complete and/or verify the first four entries
using the table and information above.</p>
<p>The next three entries should be all be set to 1 to signify that they
are provided by the shapefile</p>
<ul>
<li><p class="first">speed_available: vehicle speed provided for each road link</p>
</li>
<li><p class="first">total_AADT_available: annual average daily traffic (traffic flow)
provided for each road link</p>
</li>
<li><p class="first">vehicle_AADT available: AADT is broken down by vehicle type for each
road link</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;transportData
  ! Vector data containing all road segments for study area
  shapefiles = &#39;C:\path\to\data\LAEI2013_AADTVKm_2013_link.shp&#39;
  startDates = &#39;2008-01-01&#39;
  epsgCodes = 27700
  featureIds = &#39;OBJECTID&#39;
  ! What data is available for each road segment in this shapefile? 1 = Yes; 0 = No
  speed_available = 1                 ! Speed data. If not available then default values from parameters file are used
  total_AADT_available = 1            ! Total annual average daily total (AADT: total vehicles passing over each segment each day)
  vehicle_AADT_available = 1          ! AADT available for specific vehicle types
/
</pre></div>
</div>
</li>
</ul>
<p>The rest of the section tells GQF which attributes to use for various
aspects of the traffic data, and what different kinds of roads are
called:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    ! Road classification information. This is used with assumed values for AADT
    class_field = &#39;DESC_TERM&#39;           ! The shapefile attribute that contains road classification
    ! Strings that identify each class of road
    motorway_class = &#39;Motorway&#39;
    primary_class = &#39;A Road&#39;
    secondary_class = &#39;B Road&#39;
    ! All other road types will be considered as \ “other”
    ! Average speed for each road segment
    speed_field = &#39;Speed_kph&#39;           ! Field name
    speed_multiplier = 1.0              ! Factor that converts data to km/h (1.0 if data is already in km/h)
    ! Annual average daily total (mean number of vehicles per day) passing over each road segment in the shapefile
    ! Specify attribute names if data is present in the shapefile.
    AADT_total = &#39;AADTTOTAL&#39;            ! Total AADT for all vehicles. Leave blank (&#39;&#39;) if not available
    ! AADT for cars of different fuels (leave as &#39;&#39; if not available)
    AADT_diesel_car = &#39;AADTDcar&#39;        ! Petrol cars
    AADT_petrol_car = &#39;AADTPcar&#39;        ! Diesel cars
    ! Secondary option: Use total AADT for cars and break down using assumed fuel fractions from model parameters file
    AADT_total_car = &#39;&#39;               ! Total AADT for all cars (required if the other car fields are &#39;&#39;; ignored if they are specified)
    ! AADT for LGVs of different fuels leave as &#39;&#39; if not available)
    AADT_diesel_LGV = &#39;AADTDLgv&#39;        ! Petrol LGVs
    AADT_petrol_LGV = &#39;AADTPLgv&#39;        ! Diesel LGVs
    ! Secondary option: Use total LGV AADT and assumed fuel fractions from parameters file
    AADT_total_LGV = &#39;&#39;               ! Total AADT for all LGVs (required if the other LGV fields are &#39;&#39;; ignored if they are specified)
    ! AADT for other vehicles. These are broken down into diesel/petrol based on fuel fractions (see model parameters file)
    ! Specify shapefile attribute name or leave as &#39;&#39; if not available
    AADT_motorcycle = &#39;AADTMotorc&#39;      ! Motorcycles
    AADT_taxi = &#39;AADTTaxi&#39;              ! Taxis
    AADT_bus = &#39;AADTLtBus&#39;                  ! Buses
    AADT_coach = &#39;AADTCoach&#39;                ! Coaches
    AADT_rigid = &#39;AADTRigid&#39;                ! Rigid goods vehicles
    AADT_artic = &#39;AADTArtic&#39;                ! Articulated trucks
/
</pre></div>
</div>
</div>
<div class="section" id="vehicle-fuel-efficiency-data">
<h5>Vehicle fuel efficiency data<a class="headerlink" href="#vehicle-fuel-efficiency-data" title="Permalink to this headline">¶</a></h5>
<p>The fuelConsumption.csv file contains a list of vehicle fuel efficiency
by fuel, vehicle type and era. This is used to calculate each road
link’s fuel consumption:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;fuelConsumption
   ! File containing fuel consumption performance data for each vehicle type as standards change over the years
   profileFiles = &#39;C:\Path\To\fuelConsumption.csv&#39;
/
</pre></div>
</div>
</div>
<div class="section" id="diurnal-profiles-by-vehicle-type">
<h5>Diurnal profiles by vehicle type<a class="headerlink" href="#diurnal-profiles-by-vehicle-type" title="Permalink to this headline">¶</a></h5>
<p>Each vehicle type has a different activity profile. For example, freight
and taxi vehicle may operate later at night than passenger cars. The
Transport.csv file contains a profile for each of these:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;diurnalTraffic
   ! Diurnal cycles of transport flow for different vehicle types
   profileFiles = &#39;C:\Path\To\Transport.csv&#39;
/
</pre></div>
</div>
<p>Each profile is a week long, and these profiles control changes to the
total volume of traffic each day.</p>
</div>
</div>
</div>
<div class="section" id="run-gqf">
<h3>Run GQF<a class="headerlink" href="#run-gqf" title="Permalink to this headline">¶</a></h3>
<p>Under <em>UMEP &gt; Processor &gt; Urban Energy Balance</em>, choose <em>Anthropogenic heat - GQf (GreaterQF)</em></p>
<p>This loads the model interface dialog box:</p>
<div class="figure align-center" id="id1">
<img alt="../../../../../_images/Gqf_dialog.png" src="../../../../../_images/Gqf_dialog.png" />
<p class="caption"><span class="caption-text">The GQF dialog</span></p>
</div>
<div class="section" id="choose-configuration-files-and-output-folder">
<h4>Choose configuration files and output folder<a class="headerlink" href="#choose-configuration-files-and-output-folder" title="Permalink to this headline">¶</a></h4>
<p>Working from the top of the dialog box to the bottom…</p>
<ol class="arabic simple">
<li>Click the … buttons in the <em>Configuration and raw input data</em> panel
to browse to the <strong>parameters.nml</strong> and <strong>DataSources.nml</strong> files. A pop-up
error message will warn of any problems inside the files.</li>
<li><em>Output path:</em> A folder in which the model outputs will be stored.
It is <em>strongly recommended</em> that a new folder is used each time.</li>
<li>Click <em>Prepare input data using Data Sources</em> button. This may be a
time-consuming step: It matches the various inputs to each output
area. Where output areas and input shapes are not identical, it also
splits population or energy use across output areas based on their
overlapping fractions.</li>
<li>Once this step is complete, the <em>available at:</em> box will become
populated. This folder contains the disaggregated data needed to run
the model.</li>
</ol>
<p><strong>Tip:</strong> Save time in future: If the exact same input data files are
used in a later study, then the “prepare” step can be skipped: click the
“…” button and navigate to a folder that contains the relevant
disaggregated data. It will then be copied to the new output folder and
used as normal.</p>
</div>
<div class="section" id="run-the-model-for-1-week">
<h4>Run the model for 1 week<a class="headerlink" href="#run-the-model-for-1-week" title="Permalink to this headline">¶</a></h4>
<p>Choose a start date of 11 May 2015, using the start and end date boxes,
then select “Run”.</p>
<blockquote>
<div><div class="figure align-center" id="id2">
<img alt="../../../../../_images/Gqf_timerange.png" src="../../../../../_images/Gqf_timerange.png" />
<p class="caption"><span class="caption-text">Date range section of the GQF interface</span></p>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="visualise-results">
<h3>Visualise results<a class="headerlink" href="#visualise-results" title="Permalink to this headline">¶</a></h3>
<p>Once the model run this is finished, press <em>visualise outputs</em> to view
some of the model results to open the visualisation tool.</p>
<div class="section" id="create-emissions-maps-at-noon">
<h4>Create emissions maps at noon<a class="headerlink" href="#create-emissions-maps-at-noon" title="Permalink to this headline">¶</a></h4>
<p>Use the visualisation tool to create a map of all the Q<sub>F</sub> components at
noon (11:00-12:00 UTC) on May 11 by selecting that time and pressing
<em>Add to canvas</em>. This may take a moment to process. Close the
visualisation took and return to the main canvas to inspect the four new
layers that have appeared.</p>
<p>Each layer corresponds to a different Q<sub>F</sub> component:</p>
<ul class="simple">
<li><strong>Metab</strong>: Metabolism</li>
<li><strong>TransTot</strong>: Total from all road transport sources</li>
<li><strong>AllTot</strong>: Total Q<sub>F</sub> from all emissions</li>
<li><strong>BldTot</strong>: Total building emissions</li>
</ul>
<p>De-selecting a layer in the Layers panel removes it from view.</p>
<p>Leaving just <em>AllTot</em> (total Q<sub>F</sub> ) visible, there isn’t much structure in the
colours.</p>
<blockquote>
<div><div class="figure align-center" id="id3">
<img alt="../../../../../_images/525px-Gqf_totalqf_map.png" src="../../../../../_images/525px-Gqf_totalqf_map.png" />
<p class="caption"><span class="caption-text">Total Q<sub>F</sub> at Noon on May 11</span></p>
</div>
</div></blockquote>
<p>Add some contrast to it by choosing a different colour scale:</p>
<p>Right-click the Q<sub>F</sub> layer, go to <em>Properties &gt; Style</em>, change the colour
ramp to “Reds” and choose Mode: Natural Breaks (Jenks). This shows much
more structure, although the grid borders are distracting. These can be
removed by double-clicking the colour levels and choosing a border
colour the same as the fill colour.</p>
<blockquote>
<div><div class="figure align-center" id="id4">
<img alt="../../../../../_images/525px-Gqf_totalqf_map_recoloured.png" src="../../../../../_images/525px-Gqf_totalqf_map_recoloured.png" />
<p class="caption"><span class="caption-text">Total Q<sub>F</sub> at Noon on May 11</span></p>
</div>
</div></blockquote>
<p>The roads have a very different spatial pattern to buildings, so these
can also be visualised by selecting the TransTot layer and re-colouring
accordingly:</p>
<blockquote>
<div><div class="figure align-center" id="id5">
<img alt="../../../../../_images/525px-Gqf_transportqf_map_recoloured.png" src="../../../../../_images/525px-Gqf_transportqf_map_recoloured.png" />
<p class="caption"><span class="caption-text">GQF Transport Q<sub>F</sub> at 1200 UTC</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="plot-a-time-series-of-qf-in-the-centre-of-the-city">
<h4>Plot a time series of Q<sub>F</sub> in the centre of the city<a class="headerlink" href="#plot-a-time-series-of-qf-in-the-centre-of-the-city" title="Permalink to this headline">¶</a></h4>
<p>A time series can be shown for any of the output areas. To identify one
of interest, zoom into the city centre, choose the selection tool</p>
<blockquote>
<div><div class="figure align-center" id="id6">
<img alt="../../../../../_images/LQF_Tutorial_SelectFeatureIcon.png" src="../../../../../_images/LQF_Tutorial_SelectFeatureIcon.png" />
<p class="caption"><span class="caption-text">Select tool in QGIS</span></p>
</div>
</div></blockquote>
<p>and click an output area of
interest.</p>
<dl class="docutils">
<dt>This turns yellow. Right-click it and select the option that comes up.</dt>
<dd><div class="first last figure align-center" id="id7">
<img alt="../../../../../_images/LQF_Tutorial_SelectFeature.png" src="../../../../../_images/LQF_Tutorial_SelectFeature.png" />
<p class="caption"><span class="caption-text">Information for selected grid</span></p>
</div>
</dd>
</dl>
<p>Information about the output area
then appears on the left, with the ID shown. Make a note of this.</p>
<blockquote>
<div><div class="figure align-center" id="id8">
<img alt="../../../../../_images/LQF_Tutorial_FeatureInfo.png" src="../../../../../_images/LQF_Tutorial_FeatureInfo.png" />
<p class="caption"><span class="caption-text">Identify Results panel in QGIS</span></p>
</div>
</div></blockquote>
<p>Return to the visualisation tool, choose output area 5448 and click
<em>show plot</em>. Time series of each Q<sub>F</sub> component then appear for the week.
Note the lower traffic activity and different behaviours on Saturday and
Sunday, when people are expected to not be at work.</p>
<blockquote>
<div><div class="figure align-center" id="id9">
<img alt="../../../../../_images/600px-Gqf_timeseries_default.png" src="../../../../../_images/600px-Gqf_timeseries_default.png" />
<p class="caption"><span class="caption-text">Time series of Q<sub>F</sub> emissions</span></p>
</div>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="tutorials-2-refining-gqf-results">
<h2>Tutorials 2: Refining GQF results<a class="headerlink" href="#tutorials-2-refining-gqf-results" title="Permalink to this headline">¶</a></h2>
<p>There are several extra options in GQF. The following mini-tutorials
show how they are used:</p>
<div class="section" id="tutorial-2a-add-a-public-holiday">
<h3>Tutorial 2a: Add a public holiday<a class="headerlink" href="#tutorial-2a-add-a-public-holiday" title="Permalink to this headline">¶</a></h3>
<p>The <strong>parameters.nml</strong> file contains three entries related to public
holidays, which are treated as the second day of the weekend by GQF:</p>
<ul class="simple">
<li>Use_UK_holidays: Religious and recurrent public holidays from the
UK are calculated automatically</li>
<li>Use_custom_holidays: Set to 1 in order to have GQF read in a list
of user-provided holidays</li>
<li>custom_holidays: A comma-separated list of dates that should be
treated as holidays in format YYYY-mm-dd (e.g. “2015-05-07”,
“2015-07-30”)</li>
</ul>
<p>In this example, a fictional public holiday of 2015-05-13 is entered
into the parameters.nml file. The model is then run as in Tutorial 1,
and the resulting time series in output area 5448 is shown below:</p>
<blockquote>
<div><div class="figure align-center" id="id10">
<img alt="../../../../../_images/600px-Gqf_timeseries_default.png" src="../../../../../_images/600px-Gqf_timeseries_default.png" />
<p class="caption"><span class="caption-text">Time series with extra public holiday on May 13</span></p>
</div>
</div></blockquote>
<p>Compared against the results from Tutorial 1, the curve on May 13 in
each sub-plot now resembles May 17 (a Sunday) rather than the weekdays
around it.</p>
</div>
<div class="section" id="tutorial-2b-remove-the-sensible-heat-component">
<h3>Tutorial 2b: Remove the sensible heat component<a class="headerlink" href="#tutorial-2b-remove-the-sensible-heat-component" title="Permalink to this headline">¶</a></h3>
<p>Anthropogenic heat is made up of three parts:</p>
<ul class="simple">
<li>Sensible: Transported by convection (usually the largest share)</li>
<li>Latent: Transported by the vaporisation of water</li>
<li>Wastewater: Heat in water ejected by buildings</li>
</ul>
<p>GQF includes all of these in the calculated fluxes by default, but one
or more of them can be removed at model run-time using the checkboxes:</p>
<p>In this example, the week of 11 to 18 May 2015 is again modelled but the
“Sensible” and “Wastewater” checkboxes are un-ticked. This means the
modelled Q<sub>F</sub> will contain only latent heat. The resulting time series in
area 5448 is shown below:</p>
<blockquote>
<div><div class="figure align-center" id="id11">
<img alt="../../../../../_images/525px-Gqf_timeseries_holiday_nosensible.png" src="../../../../../_images/525px-Gqf_timeseries_holiday_nosensible.png" />
<p class="caption"><span class="caption-text">Time series with only latent and wastewater contributions included, and extra public holiday on May 13</span></p>
</div>
</div></blockquote>
<p>The emissions are far lower than those in Tutorial 2a, showing how
latent heat is a relatively small contribution. Consuming electricity
emits no latent heat, unlike gas, while metabolism now represents a
larger fraction of the total.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 – 2019, micromet@University of Reading, led by Prof Sue Grimmond

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>